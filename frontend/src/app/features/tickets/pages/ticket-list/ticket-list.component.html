<div class="ticket-list-container">
  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <h1>Biletler</h1>
      <div class="view-toggle">
        <button 
          class="toggle-btn" 
          [class.active]="viewMode === 'myCreated'"
          (click)="switchView('myCreated')">
          OluÅŸturduklarÄ±m
        </button>
        <button 
          class="toggle-btn" 
          [class.active]="viewMode === 'myAssigned'"
          (click)="switchView('myAssigned')">
          Bana Atananlar
        </button>
      </div>
    </div>
    <button class="btn btn-primary" (click)="navigateToCreate()">
      <span>+ Yeni Bilet</span>
    </button>
  </div>

  <!-- Filters -->
  <div class="filters" [formGroup]="filterForm">
    <div class="filter-group">
      <input 
        type="text" 
        formControlName="search" 
        placeholder="Bilet ara..."
        class="search-input"
      />
    </div>
    <div class="filter-group">
      <select formControlName="status" class="filter-select">
        <option value="">TÃ¼m Durumlar</option>
        @for (option of statusOptions; track option.value) {
          <option [value]="option.value">{{ option.label }}</option>
        }
      </select>
    </div>
    <div class="filter-group">
      <select formControlName="priority" class="filter-select">
        <option value="">TÃ¼m Ã–ncelikler</option>
        @for (option of priorityOptions; track option.value) {
          <option [value]="option.value">{{ option.label }}</option>
        }
      </select>
    </div>
    <button class="btn btn-secondary" (click)="clearFilters()">Temizle</button>
  </div>

  <!-- Error Message -->
  @if (errorMessage) {
    <div class="alert alert-error">
      {{ errorMessage }}
    </div>
  }

  <!-- Loading State -->
  @if (isLoading) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Biletler yÃ¼kleniyor...</p>
    </div>
  }

  <!-- Empty State -->
  @else if (tickets.length === 0 && !errorMessage) {
    <div class="empty-state">
      <h3>Bilet bulunamadÄ±</h3>
      <p>{{ viewMode === 'myCreated' ? 'HenÃ¼z hiÃ§ bilet oluÅŸturmadÄ±nÄ±z.' : 'Size atanmÄ±ÅŸ bilet bulunmuyor.' }}</p>
      <button class="btn btn-primary" (click)="navigateToCreate()">
        Ä°lk Biletinizi OluÅŸturun
      </button>
    </div>
  }

  <!-- Tickets Table -->
  @else if (!isLoading) {
    <div class="tickets-table">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>BaÅŸlÄ±k</th>
            <th>Durum</th>
            <th>Ã–ncelik</th>
            <th>OluÅŸturulma</th>
            <th>Yorumlar</th>
            <th>Ä°ÅŸlemler</th>
          </tr>
        </thead>
        <tbody>
          @for (ticket of tickets; track ticket.id) {
            <tr class="ticket-row">
              <td class="ticket-id">#{{ ticket.id }}</td>
              <td class="ticket-title">
                <div class="title-content">
                  <span class="title-text">{{ ticket.title }}</span>
                  <span class="description-preview">{{ ticket.description | slice:0:80 }}{{ ticket.description.length > 80 ? '...' : '' }}</span>
                </div>
              </td>
              <td>
                <span class="badge badge-status" [style.background-color]="getStatusColor(ticket.status)">
                  {{ getStatusLabel(ticket.status) }}
                </span>
              </td>
              <td>
                <span class="badge badge-priority" [style.background-color]="getPriorityColor(ticket.priority)">
                  {{ getPriorityLabel(ticket.priority) }}
                </span>
              </td>
              <td class="ticket-date">{{ formatDate(ticket.createdAt) }}</td>
              <td class="ticket-comments">
                <span class="comment-count">ðŸ’¬ {{ ticket.commentCount }}</span>
              </td>
              <td>
                <button class="btn btn-small" (click)="navigateToDetail(ticket.id)">
                  GÃ¶rÃ¼ntÃ¼le
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <div class="pagination-info">
        {{ totalCount }} biletten {{ (currentPage - 1) * pageSize + 1 }}-{{ Math.min(currentPage * pageSize, totalCount) }} arasÄ± gÃ¶steriliyor
      </div>
      <div class="pagination-controls">
        <button 
          class="btn btn-small" 
          [disabled]="currentPage === 1"
          (click)="goToPage(currentPage - 1)">
          Ã–nceki
        </button>
        <span class="page-info">Sayfa {{ currentPage }} / {{ totalPages }}</span>
        <button 
          class="btn btn-small" 
          [disabled]="currentPage === totalPages"
          (click)="goToPage(currentPage + 1)">
          Sonraki
        </button>
      </div>
    </div>
  }
</div>
